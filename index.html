<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link rel="shortcut icon" href="logo-ponto.png" type="image/x-icon">
    <title>Ofertas - Cidades e Categorias</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>

    <header>
        <div class="logo">
            <a href="index.html">
                <img src="logo.png" width="150" alt="">
            </a>
        </div>
        <button class="vende"><a href="vendedores.html">Vendedores</a></button>
        <div class="redes">
            <a href="https://www.instagram.com/grupopontomax/"><i class="fab fa-instagram" style="font-size: 20px;"></i></a>
            <a href="https://www.facebook.com/lojaspontomax/?locale=pt_BR"><i class="fab fa-facebook" style="font-size: 20px;"></i></a>
        </div>
    </header>
 
    <div class="content">
        <div class="imagem">
            <img src="selo.svg" width="275" alt=""> 
        </div>
        
        <div class="content">
            <div class="menu">
                <h1>SELECIONE UMA CIDADE</h1>
            <div class="buttons1">
                <button id="balsas" class="btn city" onclick="selectCity('balsas')">BALSAS</button>
                <button id="fortaleza" class="btn city" onclick="selectCity('fortaleza')">FORTALEZA DOS NOGUEIRAS</button>
            </div>
            </div>
            
            <div class="menu">
                <h1>SELECIONE UMA CATEGORIA</h1>
            <div class="buttons2">
                <button id="supermercado" class="btn category" onclick="selectCategory('supermercado')">SUPERMERCADO</button>
                <button id="bazar" class="btn category" onclick="selectCategory('bazar')">BAZAR</button>
                <button id="eletro" class="btn category" onclick="selectCategory('eletro')">ELETRO</button>
            </div>
            </div>
        </div>
    
            <div id="offers">
                <div id="offer-images"></div>
            </div>
        </div>
    </div>

    <script>
      let selectedCity = '';
let selectedCategory = '';
const HOURS_BEFORE_MIDNIGHT = 5; // Número de horas antes da meia-noite para exibir a oferta

// Função para selecionar a cidade
function selectCity(city) {
    selectedCity = city;

    // Remove a classe 'selected' dos outros botões de cidade
    document.querySelectorAll('.city').forEach(button => {
        button.classList.remove('selected');
    });

    // Adiciona a classe 'selected' ao botão clicado
    document.getElementById(city).classList.add('selected');
    
    updateOffers();
}

// Função para selecionar a categoria
function selectCategory(category) {
    selectedCategory = category;

    // Remove a classe 'selected' dos outros botões de categoria
    document.querySelectorAll('.category').forEach(button => {
        button.classList.remove('selected');
    });

    // Adiciona a classe 'selected' ao botão clicado
    document.getElementById(category).classList.add('selected');

    updateOffers();
}

// Função para atualizar as ofertas exibidas com base na cidade e categoria selecionadas
function updateOffers() {
    if (selectedCity && selectedCategory) {
        const offerImages = document.getElementById('offer-images');
        offerImages.innerHTML = '';

        // Definindo as ofertas com datas de vigência (início e fim)
        const offers = {
            balsas: {
                supermercado: [
                    { url: 'https://i.imgur.com/rnxsSkJ.jpeg', startDate: '2024-10-07', endDate: '2024-10-10' },
                    { url: 'https://i.imgur.com/NTdXMja.jpeg', startDate: '2024-10-07', endDate: '2024-10-10' },
                    { url: 'https://i.imgur.com/tzDa3id.jpeg', startDate: '2024-10-04', endDate: '2024-10-06' },
                    { url: 'https://i.imgur.com/EUXOdro.jpeg', startDate: '2024-10-04', endDate: '2024-10-12' },
                    { url: 'https://i.imgur.com/ew8SEs6.jpeg', startDate: '2024-10-04', endDate: '2024-10-06' },
                    { url: 'https://i.imgur.com/1jb628g.jpeg', startDate: '2024-10-04', endDate: '2024-10-06' },
                    { url: 'https://i.imgur.com/G937jk2.jpeg', startDate: '2024-10-04', endDate: '2024-10-06' },
                    { url: 'https://i.imgur.com/B7TaDJv.jpeg', startDate: '2024-10-04', endDate: '2024-10-06' },
                    { url: 'https://i.imgur.com/fOtOE0a.jpeg', startDate: '2024-10-02', endDate: '2024-10-09' },
                    { url: 'https://i.imgur.com/A5P240M.jpeg', startDate: '2024-10-01', endDate: '2024-10-04' }
                ],
                
                bazar: [
                { url: '', startDate: '2024-09-21', endDate: '2024-10-01' },
                ],
                
                eletro: [
                   { url: 'https://i.imgur.com/CfAMEo5.jpeg', startDate: '2024-10-07', endDate: '2024-10-13' },
                    { url: 'https://i.imgur.com/A0VgSsc.jpeg', startDate: '2024-10-06', endDate: '2024-10-07' }
                ]
            },
            fortaleza: {
                supermercado: [
                    { url: 'https://i.imgur.com/rnxsSkJ.jpeg', startDate: '2024-10-07', endDate: '2024-10-10' },
                    { url: 'https://i.imgur.com/NTdXMja.jpeg', startDate: '2024-10-07', endDate: '2024-10-10' },
                    { url: 'https://i.imgur.com/GAYjwYC.jpeg', startDate: '2024-10-07', endDate: '2024-10-10' },
                    { url: 'https://i.imgur.com/tzDa3id.jpeg', startDate: '2024-10-04', endDate: '2024-10-06' },
                    { url: 'https://i.imgur.com/EUXOdro.jpeg', startDate: '2024-10-04', endDate: '2024-10-12' },
                    { url: 'https://i.imgur.com/ew8SEs6.jpeg', startDate: '2024-10-04', endDate: '2024-10-06' },
                    { url: 'https://i.imgur.com/1jb628g.jpeg', startDate: '2024-10-04', endDate: '2024-10-06' },
                    { url: 'https://i.imgur.com/G937jk2.jpeg', startDate: '2024-10-04', endDate: '2024-10-06' },
                    { url: 'https://i.imgur.com/Vf626gB.jpeg', startDate: '2024-10-04', endDate: '2024-10-06' },
                    { url: 'https://i.imgur.com/fOtOE0a.jpeg', startDate: '2024-10-02', endDate: '2024-10-09' },
                    { url: 'https://i.imgur.com/A5P240M.jpeg', startDate: '2024-10-01', endDate: '2024-10-04' }
                ],
                bazar: [
                    { url: '', startDate: '2024-09-23', endDate: '2024-10-01' },
                ],
                eletro: [
                    { url: 'https://i.imgur.com/CfAMEo5.jpeg', startDate: '2024-10-07', endDate: '2024-10-13' },
                    { url: 'https://i.imgur.com/A0VgSsc.jpeg', startDate: '2024-10-06', endDate: '2024-10-07' }
                ]
            }
        };

        // Obtém a data e hora atuais no fuso horário local
        const now = new Date();

        // Adiciona as imagens de ofertas que estão dentro do período de vigência
        const selectedOffers = offers[selectedCity][selectedCategory];
        selectedOffers.forEach(offer => {
            const offerStart = new Date(offer.startDate);
            const offerEnd = new Date(offer.endDate);

            // Define o horário para exibição 5 horas antes da meia-noite do dia anterior
            const previousDayBeforeMidnight = new Date(offerStart);
            previousDayBeforeMidnight.setDate(offerStart.getDate());
            previousDayBeforeMidnight.setHours(24 - HOURS_BEFORE_MIDNIGHT, 0, 0); // 5 horas antes da meia-noite

            // Verifica se a data e hora atuais estão dentro da vigência
            if (now >= previousDayBeforeMidnight && now <= offerEnd) {
                const img = document.createElement('img');
                img.src = offer.url;
                offerImages.appendChild(img);
            }
        });
    }
}

    </script>
</body>
</html>
