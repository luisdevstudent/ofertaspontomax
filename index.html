<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link rel="shortcut icon" href="logo-ponto.png" type="image/x-icon">
    <title>Ofertas PontoMax</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>

    <header>
        <div class="logo">
            <a href="index.html">
                <img src="logo.png" width="150" alt="">
            </a>
        </div>
        <button class="vende"><a href="vendedores.html">Vendedores</a></button>
        <div class="redes">
            <a href="https://www.instagram.com/grupopontomax/"><i class="fab fa-instagram" style="font-size: 20px;"></i></a>
            <a href="https://www.facebook.com/lojaspontomax/?locale=pt_BR"><i class="fab fa-facebook" style="font-size: 20px;"></i></a>
        </div>
    </header>
 
    <div class="content">
        <div class="imagem">
            <img src="selo.svg" width="275" alt=""> 
        </div>
        
        <div class="content">
            <div class="menu">
                <h1>SELECIONE UMA CIDADE</h1>
            <div class="buttons1">
                <button id="balsas" class="btn city" onclick="selectCity('balsas')">BALSAS</button>
                <button id="fortaleza" class="btn city" onclick="selectCity('fortaleza')">FORTALEZA DOS NOGUEIRAS</button>
            </div>
            </div>
            
            <div class="menu">
                <h1>SELECIONE UMA CATEGORIA</h1>
            <div class="buttons2">
                <button id="supermercado" class="btn category" onclick="selectCategory('supermercado')">SUPERMERCADO</button>
                <button id="bazar" class="btn category" onclick="selectCategory('bazar')">BAZAR</button>
                <button id="eletro" class="btn category" onclick="selectCategory('eletro')">ELETRO</button>
            </div>
            </div>
        </div>
    
            <div id="offers">
                <div id="offer-images"></div>
            </div>
        </div>
    </div>

    <script>
      let selectedCity = '';
let selectedCategory = '';
const HOURS_BEFORE_MIDNIGHT = 5; // Número de horas antes da meia-noite para exibir a oferta

// Função para selecionar a cidade
function selectCity(city) {
    selectedCity = city;

    // Remove a classe 'selected' dos outros botões de cidade
    document.querySelectorAll('.city').forEach(button => {
        button.classList.remove('selected');
    });

    // Adiciona a classe 'selected' ao botão clicado
    document.getElementById(city).classList.add('selected');
    
    updateOffers();
}

// Função para selecionar a categoria
function selectCategory(category) {
    selectedCategory = category;

    // Remove a classe 'selected' dos outros botões de categoria
    document.querySelectorAll('.category').forEach(button => {
        button.classList.remove('selected');
    });

    // Adiciona a classe 'selected' ao botão clicado
    document.getElementById(category).classList.add('selected');

    updateOffers();
}

// Função para atualizar as ofertas exibidas com base na cidade e categoria selecionadas
function updateOffers() {
  if (selectedCity && selectedCategory) {
    const offerImages = document.getElementById('offer-images');
    offerImages.innerHTML = '';
    const offers = {
        
            balsas: {
                supermercado: [
                    { url: 'https://i.imgur.com/d6jPp0b.jpeg', startDate: '2024-12-02', endDate: '2024-12-06' },
                    { url: 'https://i.imgur.com/H5tOsbE.jpeg', startDate: '2024-12-02', endDate: '2024-12-06' }
                ],
                
                bazar: [
                    { url: '', startDate: '2024-11-20', endDate: '2024-11-21' }
                ],
                
                eletro: [
                   { url: '', startDate: '2024-11-22', endDate: '2024-11-24' }
                ]
            },
            fortaleza: {
                supermercado: [
                    { url: 'https://i.imgur.com/d6jPp0b.jpeg', startDate: '2024-12-02', endDate: '2024-12-06' },
                    { url: 'https://i.imgur.com/8rzg5gK.jpeg', startDate: '2024-12-02', endDate: '2024-12-06' }
                ],
                bazar: [
                    { url: '', startDate: '2024-11-20', endDate: '2024-11-21' }
                ],
                eletro: [
                   { url: '', startDate: '2024-11-22', endDate: '2024-11-24' }
                ]
            }
        };

        const now = new Date();
    const selectedOffers = offers[selectedCity][selectedCategory];
    selectedOffers.forEach(offer => {
      const offerStart = new Date(offer.startDate);
      const offerEnd = new Date(offer.endDate);
      const previousDayBeforeMidnight = new Date(offerStart);
      previousDayBeforeMidnight.setDate(offerStart.getDate());
      previousDayBeforeMidnight.setHours(24 - HOURS_BEFORE_MIDNIGHT, 0, 0);
      if (now >= previousDayBeforeMidnight && now <= offerEnd) {
        const a = document.createElement('a');
        a.href = offer.link;
        a.target = '_blank';  // Abre o link em uma nova aba
        const img = document.createElement('img');
        img.src = offer.url;
        a.appendChild(img);
        offerImages.appendChild(a);
      }
    });
  }
}

    </script>
</body>
</html>
